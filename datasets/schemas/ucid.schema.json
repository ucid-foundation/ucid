{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://ucid.org/schemas/ucid.schema.json",
  "title": "UCID Record Schema",
  "description": "JSON Schema for UCID (Urban Context Identifier) records. Defines the structure of parsed UCID strings.",
  "type": "object",
  "required": ["ucid", "city", "coordinates", "h3_index", "timestamp", "context", "grade", "confidence"],
  "properties": {
    "ucid": {
      "type": "string",
      "description": "Full UCID string in canonical format",
      "pattern": "^UCID-V1:[A-Z]{3}:[+-]?\\d+\\.\\d{3}:[+-]?\\d+\\.\\d{3}:\\d{1,2}:[0-9a-f]{15}:\\d{4}W\\d{2}T\\d{2}:[A-Z0-9]+:[A-F]:\\d\\.\\d{2}:$",
      "examples": ["UCID-V1:IST:+41.015:+28.979:9:891f2ed6df7ffff:2026W03T14:15MIN:A:0.95:"]
    },
    "version": {
      "type": "string",
      "description": "UCID version identifier",
      "const": "V1",
      "examples": ["V1"]
    },
    "city": {
      "type": "string",
      "description": "3-letter city code",
      "pattern": "^[A-Z]{3}$",
      "examples": ["IST", "BER", "AMS"]
    },
    "coordinates": {
      "type": "object",
      "description": "Geographic coordinates",
      "required": ["lat", "lon"],
      "properties": {
        "lat": {
          "type": "number",
          "minimum": -90,
          "maximum": 90
        },
        "lon": {
          "type": "number",
          "minimum": -180,
          "maximum": 180
        }
      }
    },
    "h3_resolution": {
      "type": "integer",
      "description": "H3 hexagonal grid resolution",
      "minimum": 0,
      "maximum": 15,
      "default": 9,
      "examples": [9, 10, 11]
    },
    "h3_index": {
      "type": "string",
      "description": "H3 hexagonal index (15 hex characters)",
      "pattern": "^[89a-f][0-9a-f]{14}$",
      "examples": ["891f2ed6df7ffff"]
    },
    "timestamp": {
      "type": "string",
      "description": "ISO week timestamp (YYYYWwwThh)",
      "pattern": "^\\d{4}W\\d{2}T\\d{2}$",
      "examples": ["2026W03T14", "2026W15T09"]
    },
    "context": {
      "type": "string",
      "description": "Context algorithm identifier",
      "enum": ["15MIN", "TRANSIT", "WALK", "NONE"],
      "examples": ["15MIN", "TRANSIT"]
    },
    "grade": {
      "type": "string",
      "description": "Context score grade (A-F)",
      "enum": ["A", "B", "C", "D", "F"],
      "examples": ["A", "B"]
    },
    "confidence": {
      "type": "number",
      "description": "Confidence score [0.0, 1.0]",
      "minimum": 0,
      "maximum": 1,
      "examples": [0.95, 0.82, 0.75]
    }
  },
  "additionalProperties": true,
  "_meta": {
    "version": "1.0.5",
    "created": "2026-01-15",
    "author": "UCID Foundation"
  }
}
